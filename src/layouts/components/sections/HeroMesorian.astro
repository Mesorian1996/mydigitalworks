---
import CustomButton from "@/components/CustomButton.astro";
import webdesignImage from "@/assets/images/leistungen/webdesign.jpg";
import seoImage from "@/assets/images/leistungen/SEO.jpg";
import googleBusinessImage from "@/assets/images/leistungen/google_unternehemsprofil.jpg";
import lexofficeImage from "@/assets/images/leistungen/digitale_buchhaltung_lexware.svg";

const bentoItems = [
  {
    kicker: "Mobile first · Webentwicklung",
    title: "Webdesign",
    href: "/leistungen/webdesign",
    image: webdesignImage.src,
    span: "lg:col-span-3",
  },
  {
    kicker: "AI SEO · Präsenz steigern",
    title: "SEO",
    href: "/leistungen/seo-local",
    image: seoImage.src,
    span: "lg:col-span-2",
  },
  {
    kicker: "Auffindbarkeit auf Google",
    title: "Google Unternehmensprofil",
    href: "/leistungen/google-unternehmensprofil",
    image: googleBusinessImage.src,
    span: "lg:col-span-2",
  },
  {
    kicker: "Tool · Digitale Buchhaltung",
    title: "Digitale Buchhaltung",
    href: "/leistungen/buchhaltung-digital",
    image: lexofficeImage.src,
    span: "lg:col-span-3",
  },
];

const metaLine = "MY DIGITAL WORKS · WEBDESIGN · SEO · BRANDING";
---

<section id="hero" class="hero-root relative overflow-hidden text-white lg:flex lg:min-h-[92svh] lg:items-center">
  <!-- Background gradient (unchanged) -->
  <div
    class="pointer-events-none absolute inset-0"
    aria-hidden="true"
    style="
      background:
        radial-gradient(circle at 18% 24%, rgba(71, 103, 131, 0.16), transparent 32%),
        radial-gradient(circle at 82% 12%, rgba(201, 186, 168, 0.14), transparent 32%),
        linear-gradient(135deg, #476783 0%, #648298 30%, #c9baa8 85%, #f7b97d 100%);
    "
  ></div>

  <!-- Contrast overlay -->
  <div
    class="pointer-events-none absolute inset-0"
    aria-hidden="true"
    style="
      background:
        radial-gradient(circle at 22% 40%, rgba(0,0,0,0.30), transparent 56%),
        radial-gradient(circle at 78% 30%, rgba(0,0,0,0.22), transparent 58%),
        linear-gradient(90deg, rgba(0,0,0,0.22) 0%, rgba(0,0,0,0.08) 55%, rgba(0,0,0,0.18) 100%);
    "
  ></div>

  <div class="relative mx-auto w-full max-w-6xl px-4 sm:px-6 py-12 sm:py-16 lg:py-24 lg:min-h-[92svh]">
    <!-- IMPORTANT: on mobile, single column so LEFT takes full width -->
    <div class="grid gap-10 lg:grid-cols-2 lg:items-center">
      <!-- LEFT (full width on mobile) -->
      <div class="relative z-10 w-full max-w-none flex flex-col justify-center min-h-[85svh] sm:min-h-[88svh] lg:min-h-auto">
        <p class="hero-in text-xs uppercase tracking-[0.32em] text-white/80" style="animation-delay:.05s">
          {metaLine}
        </p>

        <!-- text is white; only keywords orange -->
        <h1
          class="hero-in mt-6 text-4xl font-extrabold tracking-tight text-white sm:text-5xl lg:text-6xl"
          style="animation-delay:.12s; line-height:1.10;"
        >
          Webseiten die{" "}
          <span class="brand-accent">Vertrauen</span>
          <br class="hidden sm:block" />
          <span class="block sm:inline">schaffen und{" "}</span>
          <span class="brand-accent">Anfragen</span>
          <br class="hidden sm:block" />
          <span class="block sm:inline">bringen.</span>
        </h1>

        <p
          class="hero-in mt-5 max-w-none sm:max-w-xl text-base leading-relaxed text-white/90 sm:text-lg"
          style="animation-delay:.18s"
        >
          Webdesign, Google Präsenz, digitale Buchhaltung und Rebranding. Mobile-First Design mit einem modernen SEO optimiert auf AI Suche.
        </p>

        <div class="hero-in mt-8 flex flex-wrap items-center gap-3" style="animation-delay:.24s">
          <CustomButton
            label="Kostenloses Erstgespräch"
            url="#footer-with-contact"
            hoverEffect="creative-fill"
            class="btn-primary bg-[#476783] border-[#476783] text-white hover:bg-[#c9baa8] hover:border-[#c9baa8] hover:text-[#0a1a2f] effect-color-dark"
          />
          <a
            href="/leistungen"
            class="text-sm font-semibold text-white/90 underline underline-offset-4 hover:text-white
                   focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-[#f7b97d]"
          >
            Leistungen ansehen
          </a>
        </div>
      </div>

      <!-- RIGHT: Bento (stays below on mobile) -->
      <div class="relative z-10 mt-10 lg:mt-0">
        <div class="bento hero-in" style="animation-delay:.10s">
          {bentoItems.map((item, idx) => (
            <a
              href={item.href}
              class={`bento-card group reveal-on-scroll ${item.span}`}
              aria-label={`${item.title} – Zur Detailseite`}
              style={`--reveal-delay:${0.1 + idx * 0.05}s`}
            >
              <img
                src={item.image}
                alt={item.title}
                class="bento-image"
                loading="lazy"
                decoding="async"
              />
              <span class="bento-overlay" aria-hidden="true"></span>
              <div class="bento-content">
                <span class="bento-kicker">{item.kicker}</span>
                <span class="bento-title">{item.title}</span>
              </div>
              <span class="bento-halo" aria-hidden="true"></span>
            </a>
          ))}
        </div>

        <p class="mt-5 text-center text-xs text-white/70 lg:hidden">
          Tippe auf eine Leistung, um zur Unterseite zu springen.
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  const heroSection = document.querySelector("#hero");
  if (heroSection) {
    const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    const revealEls = heroSection.querySelectorAll(".reveal-on-scroll");
    if (prefersReduced) {
      revealEls.forEach((el) => el.classList.add("is-revealed"));
    } else {
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-revealed");
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.2 },
      );
      revealEls.forEach((el) => observer.observe(el));
    }
  }
</script>
